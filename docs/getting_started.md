# Getting started

## Installation

Get the latest version of the pyControl GUI, either by downloading it at a zip file from the [releases](https://github.com/pyControl/code/releases) page or by cloning the [code repository](https://github.com/pyControl/code) to your computer with Git.  Cloning the repository is recommended as it makes it easier to update pyControl in the future.

Either way you obtain the code, you will have the following folder structure:

```
- pyControl
	- gui          # Graphical user interface
    - com          # Serial communication and data logging
    - config       # Configuration files
    - data         # Behavioural data.
    - experiments  # Experiment definition files.
    - devices      # pyControl hardware classes (uploaded to pyboard).
    - pyControl    # pyControl framework        (uploaded to pyboard).
    - tasks        # Task definition files
    - tools        # Tools for importing and visualising pycontrol data
    - pyControl_GUI.py # Python script to launch the GUI.
```

### Dependencies

pyControl has the following dependencies:

- Python 3
- pyserial
- numpy
- pyqt5
- pyqtgraph 

 On a windows machine that does not already have Python installed, the simplest way to install Python is to download an installer from [python.org](https://www.python.org/downloads/). To ensure you can run Python files (including the pyControl GUI) by double-clicking on them, select the options 'Add Python to PATH', 'Add Python to environment variables', and 'Associate files with Python' during installation.  Note; selecting these options when installing Python will cause the Python version you are installing to take precedence over any other version of Python installed on the computer, so may break previous Python based workflows on the computer.

Once you have a working Python 3 installation on the computer, run the windows command prompt (cmd.exe) as an administrator and enter the following commands to install the required packages:

```
python -m pip install numpy
python -m pip install pyserial
python -m pip install pyqt5
python -m pip install pyqtgraph==0.11.0
```

You should then be able to launch the GUI by double-clicking the file *pyControl_GUI.py* in the pyControl root directory.  

pyControl has been tested primarily on Windows 10 but in principle should be cross-platform and has been used on Mac and Linux. 


## Updating pyControl

If you installed  pyControl by cloning it with git, you can update it by simply pulling the latest version from the code repository.

Alternatively, you can download the latest version from the download page, unzip it, and copy across the *tasks* directory and *config* directory from your old installation to keep your tasks and configuration settings.  

Either way, after updating pyControl reload the framework onto your pyboards using the GUI's board config menu.

## Running a task

Run the file *pyControl_GUI.py* in the pyControl root directory, you will see a GUI window like that shown above, with the *Run Task* tab selected.


Plug in a pyboard and it will appear in the drop down menu in the *Setup*  box.  Select the board and press the *Connect* button.  The GUI will connect to the board.  


If the pyControl framework is not already installed on the board, you will see a message saying *Load pyControl framework using 'Config' button.* Press the *Config* button to bring up the config menu and select *Load framework*.  If you see a message prompting you to disable the pyboard filesystem from acting as a USB flash drive, click *Yes*, then reconnect to the board (the serial port may have changed when you disable the flash drive) and load the framework.


Once the pyControl framework is installed on the board, from the *Tasks* drop down menu, select the task [*blinker*](https://github.com/pyControl/code/blob/master/tasks/example/blinker.py) in the *example* folder.  Press the *Upload* button to upload the task to the pyboard.


Press the *Start* button.  The task will run causing the blue LED on the pyboard to start blinking.


Stop the task with the *Stop* button.


To save data generated by the task to disk, enter a subject ID in the *Subject ID* text box.  The *Start* button will change to *Record* indicating that data from the run will be saved.  Run the task with the *Record* button, a data file will be created in the *pyControl/data* folder.


See the [GUI](user-guide/graphical-user-interface.md) user guide for information on configuring and running experiments on multiple boxes in parrallel.